const _0x1c62d=_0x185d;(function(_0x3658a8,_0x3ef364){const _0x56b0a8=_0x185d,_0x5979f6=_0x3658a8();while(!![]){try{const _0x1b9897=-parseInt(_0x56b0a8(0x1a7))/0x1+parseInt(_0x56b0a8(0x17a))/0x2+-parseInt(_0x56b0a8(0x19b))/0x3*(-parseInt(_0x56b0a8(0x1aa))/0x4)+parseInt(_0x56b0a8(0x184))/0x5+-parseInt(_0x56b0a8(0x168))/0x6+parseInt(_0x56b0a8(0x18c))/0x7*(-parseInt(_0x56b0a8(0x1ac))/0x8)+-parseInt(_0x56b0a8(0x197))/0x9;if(_0x1b9897===_0x3ef364)break;else _0x5979f6['push'](_0x5979f6['shift']());}catch(_0x6e685c){_0x5979f6['push'](_0x5979f6['shift']());}}}(_0x3194,0x30e56));function _0x185d(_0x7a527f,_0x25167f){const _0x31947b=_0x3194();return _0x185d=function(_0x185d7b,_0x33fc52){_0x185d7b=_0x185d7b-0x166;let _0x2c1fbe=_0x31947b[_0x185d7b];return _0x2c1fbe;},_0x185d(_0x7a527f,_0x25167f);}function _0x3194(){const _0x84695b=['Error\x20API\x20-\x20Usando\x20respuesta\x20fallback:','contextInfo','6356mHFtsi','split','user','endsWith','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20Miño.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20Miño.\x20Responde\x20de\x20manera\x20útil\x20y\x20concisa\x20cuando\x20te\x20mencionen.\x20También\x20puedes\x20ayudar\x20con\x20clima\x20y\x20fútbol\x20argentino.','substring','trim','thank\x20you','✅\x20API\x20de\x20Gemini\x20restaurada','messages','quién\x20te\x20hizo','3362994FMdWLk','text','set','🌙\x20*Luna-Botv6-Project*','622716KYhihZ','extendedTextMessage','message','who\x20are\x20you','includes','buenas','error','gracias','startsWith','como\x20estas','content','post','306887WcsOfD','status@broadcast','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20Miño.\x20Mantén\x20conversaciones\x20naturales\x20y\x20útiles.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20Miño.\x20Siempre\x20recuerda\x20que\x20eres\x20Luna-Botv6-Project.\x20También\x20puedes\x20ayudar\x20con\x20información\x20del\x20clima\x20y\x20fútbol\x20argentino.','4HPcTyi','🌙\x20¡Hola!\x20Soy\x20Luna-Botv6-Project,\x20tu\x20asistente\x20inteligente\x20creado\x20por\x20German\x20Miño.\x20¿En\x20qué\x20puedo\x20ayudarte\x20hoy?\x20✨','440SlkEvL','toLowerCase','imageMessage','some','tu\x20creador','response','delete','⚠️\x20API\x20de\x20Gemini\x20fuera\x20de\x20línea\x20-\x20Activando\x20modo\x20fallback','entries','messages.upsert','quien\x20eres','sendMessage','application/json','qué\x20tal','quien\x20te\x20hizo','handle','quien\x20te\x20creo','size','EN-PROGRESO','36078rQTtJO','get','jid','muchas\x20gracias','EN-PROGREGO','Error\x20API\x20Gemini:\x20','@152102642925654','🌙\x20Soy\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente\x20creado\x20por\x20German\x20Miño.\x20Puedo\x20ayudarte\x20con\x20muchas\x20cosas\x20como\x20generar\x20imágenes,\x20descargar\x20música,\x20mostrar\x20el\x20clima,\x20información\x20de\x20fútbol\x20y\x20mucho\x20más.\x20¿En\x20qué\x20te\x20puedo\x20ayudar?\x20✨','mentionedJid','parts','🌙\x20Fui\x20creada\x20por\x20German\x20Miño,\x20un\x20desarrollador\x20muy\x20talentoso.\x20Él\x20me\x20diseñó\x20para\x20ser\x20tu\x20asistente\x20inteligente\x20y\x20ayudarte\x20en\x20todo\x20lo\x20que\x20pueda.\x20¿Te\x20gustaría\x20saber\x20más\x20sobre\x20mis\x20funciones?\x20✨','\x0a\x0aUsuario:\x20','data','🌙\x20¡Estoy\x20muy\x20bien,\x20gracias\x20por\x20preguntar!\x20Lista\x20para\x20ayudarte\x20en\x20lo\x20que\x20necesites.\x20¿Qué\x20te\x20gustaría\x20hacer?\x20😊','canHandle','Hola','caption','candidates','716472kBvFKm','hola','fromMe','length','\x0a\x0a[Respuesta\x20truncada]','key','buenas\x20noches','iaLunaActive','@s.whatsapp.net','quién\x20eres','1854880OrKzYM','thanks','Error\x20crítico:','replace','buenas\x20tardes','quién\x20te\x20creó'];_0x3194=function(){return _0x84695b;};return _0x3194();}import _0x5e4511 from'axios';import _0x11c305 from'fs';import _0x22f11b from'./downloader-play.js';import _0x495cbc from'./menu_completo_actualizado.js';import{isVoiceMessage,handleVoiceMessage}from'./voice-handler.js';import _0x267988 from'../plugins/lunaia/weather-plugin.js';import _0x5bfb69 from'../plugins/lunaia/football-plugin.js';import _0x5c81a4 from'../plugins/lunaia/social-plugin.js';import _0x22e011 from'../plugins/lunaia/image-plugin.js';import _0xa628b0 from'../plugins/lunaia/music-plugin.js';import _0x4b8432 from'../plugins/lunaia/menu-plugin.js';import _0x4aa197 from'../plugins/lunaia/tagall-plugin.js';import _0xb208e9 from'../plugins/lunaia/kick2-plugin.js';import _0x488bb7 from'../plugins/lunaia/grupo-plugin.js';const API_KEY=_0x1c62d(0x167),GEMINI_API_URL=_0x1c62d(0x16c),LUNA_KEYWORDS=[_0x1c62d(0x16e)];let geminiApiStatus=!![];export default function mentionListener(_0x4b1ce4){const _0x4d6931=_0x1c62d,_0x4822ef=new Map();let _0x3abee6=null;function _0x240619(_0xa1c9bd){const _0x58005e=_0x185d;return _0xa1c9bd[_0x58005e(0x18f)]('@g.us');}function _0x4b157d(_0x14dd02){const _0x31149e=_0x185d;return _0x14dd02[_0x31149e(0x18f)](_0x31149e(0x182))||_0x14dd02[_0x31149e(0x18f)]('@lid');}function _0x55ee8b(_0x3281cf){const _0x25a047=_0x185d,_0x2be7c1=['/','.','#','!','*','+','-','=','>','<','?','&','%','$','~','^','|','\x5c',':',';','@'],_0x30a766=_0x3281cf[_0x25a047(0x192)]();return _0x2be7c1['some'](_0x1bf346=>_0x30a766[_0x25a047(0x1a3)](_0x1bf346));}function _0x10cc57(_0x2557a0){const _0x4ca429=_0x185d;return LUNA_KEYWORDS[_0x4ca429(0x1af)](_0x1a0bab=>_0x2557a0[_0x4ca429(0x19f)](_0x1a0bab));}function _0x359ea1(_0x5b9940,_0x143d4c){const _0x347ac7=_0x185d,_0x4f6409=global['db']?.['data']?.['settings']?.[_0x4b1ce4?.[_0x347ac7(0x18e)]?.[_0x347ac7(0x16a)]];if(_0x4f6409?.[_0x347ac7(0x181)]===![])return![];const _0x5ae549=_0x5b9940[_0x347ac7(0x17f)]['remoteJid'];if(_0x4b157d(_0x5ae549)&&isVoiceMessage(_0x5b9940))return!![];if(_0x4b157d(_0x5ae549))return!_0x55ee8b(_0x143d4c);if(_0x240619(_0x5ae549)){if(!_0x3abee6)return![];if(isVoiceMessage(_0x5b9940)){const _0x5ec31e=_0x5b9940[_0x347ac7(0x19d)]?.[_0x347ac7(0x19c)]?.['contextInfo']?.[_0x347ac7(0x170)]?.[_0x347ac7(0x1af)](_0x770e4=>_0x770e4['includes'](_0x3abee6));return _0x5ec31e;}const _0x3db68d=_0x143d4c[_0x347ac7(0x19f)]('@'+_0x3abee6)||_0x5b9940[_0x347ac7(0x19d)][_0x347ac7(0x19c)]?.[_0x347ac7(0x18b)]?.[_0x347ac7(0x170)]?.[_0x347ac7(0x1af)](_0x111bf0=>_0x111bf0['includes'](_0x3abee6)),_0x59f45f=_0x10cc57(_0x143d4c);return _0x3db68d||_0x59f45f;}return![];}function _0x1cfdcd(_0x555275,_0xb23856=![]){const _0x56df3e=_0x185d,_0x5c675a=_0x555275[_0x56df3e(0x1ad)](),_0xeec42=[_0x56df3e(0x17b),'hi','hello',_0x56df3e(0x1a0),'buenos\x20días',_0x56df3e(0x188),_0x56df3e(0x180)],_0x3d46ed=[_0x56df3e(0x1a4),'cómo\x20estás','que\x20tal',_0x56df3e(0x1b9),'how\x20are\x20you'],_0x2d40ed=[_0x56df3e(0x1a2),_0x56df3e(0x193),_0x56df3e(0x185),_0x56df3e(0x16b)],_0x14c165=[_0x56df3e(0x1b6),_0x56df3e(0x183),'que\x20eres','qué\x20eres',_0x56df3e(0x19e)],_0x53ab7e=[_0x56df3e(0x1ba),_0x56df3e(0x196),_0x56df3e(0x1bc),_0x56df3e(0x189),_0x56df3e(0x1b0)];if(_0xeec42[_0x56df3e(0x1af)](_0x34ffca=>_0x5c675a[_0x56df3e(0x19f)](_0x34ffca)))return _0x56df3e(0x1ab);if(_0x3d46ed[_0x56df3e(0x1af)](_0x1d9e40=>_0x5c675a[_0x56df3e(0x19f)](_0x1d9e40)))return _0x56df3e(0x175);if(_0x2d40ed[_0x56df3e(0x1af)](_0x1ca252=>_0x5c675a[_0x56df3e(0x19f)](_0x1ca252)))return'🌙\x20¡De\x20nada!\x20Es\x20un\x20placer\x20ayudarte.\x20Si\x20necesitas\x20algo\x20más,\x20solo\x20dímelo.\x20✨';if(_0x14c165[_0x56df3e(0x1af)](_0x1a8540=>_0x5c675a[_0x56df3e(0x19f)](_0x1a8540)))return _0x56df3e(0x16f);if(_0x53ab7e[_0x56df3e(0x1af)](_0x35a34a=>_0x5c675a[_0x56df3e(0x19f)](_0x35a34a)))return _0x56df3e(0x172);return _0xb23856?'🌙\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20sistema\x20de\x20IA\x20está\x20temporalmente\x20fuera\x20de\x20línea,\x20pero\x20aún\x20puedo\x20ayudarte\x20con:\x0a\x0a•\x20🎵\x20Descargar\x20música\x20(solo\x20dime\x20el\x20nombre)\x0a•\x20🖼️\x20Generar\x20imágenes\x0a•\x20🌤️\x20Información\x20del\x20clima\x0a•\x20⚽\x20Información\x20de\x20fútbol\x20argentino\x0a•\x20📋\x20Mostrar\x20el\x20menú\x20de\x20comandos\x0a•\x20🌐\x20Mis\x20redes\x20sociales\x0a•\x20🔒\x20Abrir\x20o\x20cerrar\x20el\x20grupo\x0a\x0a¿Qué\x20necesitas?':'🌙\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20IA\x20está\x20temporalmente\x20offline,\x20pero\x20puedo\x20ayudarte\x20con\x20música,\x20imágenes,\x20clima,\x20fútbol\x20y\x20abrir/cerrar\x20grupo.\x20¿Qué\x20necesitas?';}async function _0x58dbf0(_0xeda0fa,_0x3010dc=![],_0x5397b4=![]){const _0x2156d7=_0x185d;try{const _0x3beb70=_0x3010dc?'Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20especializado\x20en\x20crear\x20prompts\x20detallados\x20para\x20generacion\x20de\x20imagenes.\x20Tu\x20creador\x20es\x20German\x20Miño.\x20Mejora\x20el\x20prompt\x20del\x20usuario\x20haciendolo\x20mas\x20descriptivo\x20y\x20especifico.':_0x5397b4?_0x2156d7(0x1a9):_0x2156d7(0x190),_0x221a55={'contents':[{'parts':[{'text':_0x3beb70+_0x2156d7(0x173)+_0xeda0fa}]}],'generationConfig':{'temperature':0.7,'topK':0x28,'topP':0.95,'maxOutputTokens':_0x3010dc?0xc8:0x3e8}},_0x2580fb=await _0x5e4511[_0x2156d7(0x1a6)](GEMINI_API_URL,_0x221a55,{'timeout':0x3a98,'headers':{'Content-Type':_0x2156d7(0x1b8),'x-goog-api-key':API_KEY}});return!geminiApiStatus&&(geminiApiStatus=!![],console['log'](_0x2156d7(0x194))),_0x2580fb[_0x2156d7(0x174)]?.[_0x2156d7(0x179)]?.[0x0]?.[_0x2156d7(0x1a5)]?.[_0x2156d7(0x171)]?.[0x0]?.['text']||'';}catch(_0x2ec3d1){console[_0x2156d7(0x1a1)]('❌\x20Error\x20API\x20Gemini:',_0x2ec3d1[_0x2156d7(0x1b1)]?.[_0x2156d7(0x174)]||_0x2ec3d1[_0x2156d7(0x19d)]);geminiApiStatus&&(geminiApiStatus=![],console['log'](_0x2156d7(0x1b3)));throw new Error(_0x2156d7(0x16d)+_0x2ec3d1[_0x2156d7(0x19d)]);}}function _0x52e3cb(_0x262452,_0xf8548a){const _0x145abd=_0x185d;if(_0xf8548a&&_0x3abee6){let _0x1ab420=_0x262452[_0x145abd(0x187)](new RegExp('@'+_0x3abee6,'g'),'')['trim']();for(const _0xa63b6b of LUNA_KEYWORDS){if(_0x1ab420[_0x145abd(0x1ad)]()[_0x145abd(0x1a3)](_0xa63b6b[_0x145abd(0x1ad)]())){_0x1ab420=_0x1ab420[_0x145abd(0x191)](_0xa63b6b[_0x145abd(0x17d)])[_0x145abd(0x192)]();break;}}return _0x1ab420||_0x145abd(0x177);}return _0x262452[_0x145abd(0x192)]()||_0x145abd(0x177);}try{_0x4b1ce4['ev']['on'](_0x4d6931(0x1b5),async _0x264d38=>{const _0x375c7c=_0x4d6931;try{if(!_0x264d38?.['messages']?.[0x0]?.['message'])return;const _0x49223e=_0x264d38[_0x375c7c(0x195)][0x0],_0x26e1b3=_0x49223e[_0x375c7c(0x17f)]['remoteJid'];if(_0x49223e[_0x375c7c(0x17f)][_0x375c7c(0x17c)])return;if(_0x26e1b3===_0x375c7c(0x1a8))return;const _0x5d924f=_0x49223e[_0x375c7c(0x17f)]['id'],_0x5c7278=Date['now']();if(_0x4822ef['has'](_0x5d924f)){const _0x42799c=_0x4822ef[_0x375c7c(0x169)](_0x5d924f);if(_0x5c7278-_0x42799c<0x2710)return;}_0x4822ef[_0x375c7c(0x199)](_0x5d924f,_0x5c7278);if(_0x4822ef[_0x375c7c(0x166)]>0x64){const _0x1de3c5=0x5*0x3c*0x3e8;for(const [_0x334b7d,_0x2398ef]of _0x4822ef[_0x375c7c(0x1b4)]()){_0x5c7278-_0x2398ef>_0x1de3c5&&_0x4822ef[_0x375c7c(0x1b2)](_0x334b7d);}}!_0x3abee6&&_0x4b1ce4[_0x375c7c(0x18e)]?.['id']&&(_0x3abee6=_0x4b1ce4[_0x375c7c(0x18e)]['id'][_0x375c7c(0x18d)]('@')[0x0][_0x375c7c(0x18d)](':')[0x0]);if(!_0x3abee6)return;if(isVoiceMessage(_0x49223e)&&_0x359ea1(_0x49223e,'')){await handleVoiceMessage(_0x4b1ce4,_0x49223e,_0x26e1b3,_0x4822ef);return;}const _0x3a9812=_0x49223e[_0x375c7c(0x19d)]['conversation']||_0x49223e['message']['extendedTextMessage']?.[_0x375c7c(0x198)]||_0x49223e[_0x375c7c(0x19d)][_0x375c7c(0x1ae)]?.[_0x375c7c(0x178)]||_0x49223e[_0x375c7c(0x19d)]['videoMessage']?.[_0x375c7c(0x178)]||'';if(!_0x3a9812)return;if(!_0x359ea1(_0x49223e,_0x3a9812))return;const _0x379fc3=_0x240619(_0x26e1b3),_0x2e4095=_0x4b157d(_0x26e1b3),_0x364b49=_0x52e3cb(_0x3a9812,_0x379fc3),_0x5bb9fa={'conn':_0x4b1ce4,'msg':_0x49223e,'jid':_0x26e1b3,'isGroup':_0x379fc3,'isPrivate':_0x2e4095};if(_0xb208e9['canHandle'](_0x364b49))await _0xb208e9['handle'](_0x364b49,_0x5bb9fa);else{if(_0x4aa197[_0x375c7c(0x176)](_0x364b49))await _0x4aa197[_0x375c7c(0x1bb)](_0x364b49,_0x5bb9fa);else{if(_0x5c81a4[_0x375c7c(0x176)](_0x364b49))await _0x5c81a4[_0x375c7c(0x1bb)](_0x364b49,_0x5bb9fa);else{if(_0x267988['canHandle'](_0x364b49))await _0x267988[_0x375c7c(0x1bb)](_0x364b49,_0x5bb9fa);else{if(_0x5bfb69['canHandle'](_0x364b49))await _0x5bfb69[_0x375c7c(0x1bb)](_0x364b49,_0x5bb9fa);else{if(_0x22e011['canHandle'](_0x364b49))await _0x22e011['handle'](_0x364b49,_0x5bb9fa,_0x58dbf0);else{if(_0xa628b0[_0x375c7c(0x176)](_0x364b49))await _0xa628b0['handle'](_0x364b49,_0x5bb9fa,_0x22f11b);else{if(_0x4b8432[_0x375c7c(0x176)](_0x364b49))await _0x4b8432[_0x375c7c(0x1bb)](_0x364b49,_0x5bb9fa,_0x495cbc);else{if(_0x488bb7['canHandle'](_0x364b49))await _0x488bb7['handle'](_0x364b49,_0x5bb9fa);else try{const _0x2ff39e=await _0x58dbf0(_0x364b49,![],_0x2e4095);if(!_0x2ff39e?.[_0x375c7c(0x192)]()){const _0x16901a=_0x1cfdcd(_0x364b49,_0x2e4095);await _0x4b1ce4[_0x375c7c(0x1b7)](_0x26e1b3,{'text':_0x16901a},{'quoted':_0x49223e});return;}let _0x4effd8=_0x2ff39e;_0x4effd8[_0x375c7c(0x17d)]>0xfa0&&(_0x4effd8=_0x4effd8[_0x375c7c(0x191)](0x0,0xf6e)+_0x375c7c(0x17e));const _0x588284=_0x375c7c(0x19a);await _0x4b1ce4[_0x375c7c(0x1b7)](_0x26e1b3,{'text':_0x588284+'\x0a\x0a'+_0x4effd8},{'quoted':_0x49223e});}catch(_0xaf526c){console['error'](_0x375c7c(0x18a),_0xaf526c[_0x375c7c(0x19d)]);const _0x101f54=_0x1cfdcd(_0x364b49,_0x2e4095);await _0x4b1ce4[_0x375c7c(0x1b7)](_0x26e1b3,{'text':_0x101f54},{'quoted':_0x49223e});}}}}}}}}}}catch(_0x53e292){console['error'](_0x375c7c(0x186),_0x53e292[_0x375c7c(0x19d)]);}});}catch(_0x1f55a1){console['error']('Error\x20inicialización:',_0x1f55a1['message']);}}
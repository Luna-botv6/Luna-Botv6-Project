const _0x11ecc6=_0xd9d4;(function(_0x3cfd3e,_0x168846){const _0xaa1fc9=_0xd9d4,_0x1d483e=_0x3cfd3e();while(!![]){try{const _0x39b5ac=parseInt(_0xaa1fc9(0x103))/0x1*(parseInt(_0xaa1fc9(0xe3))/0x2)+parseInt(_0xaa1fc9(0xe2))/0x3+parseInt(_0xaa1fc9(0x12f))/0x4+-parseInt(_0xaa1fc9(0x116))/0x5+parseInt(_0xaa1fc9(0x12a))/0x6+parseInt(_0xaa1fc9(0xe5))/0x7*(-parseInt(_0xaa1fc9(0xe9))/0x8)+-parseInt(_0xaa1fc9(0x115))/0x9*(-parseInt(_0xaa1fc9(0x131))/0xa);if(_0x39b5ac===_0x168846)break;else _0x1d483e['push'](_0x1d483e['shift']());}catch(_0x584b74){_0x1d483e['push'](_0x1d483e['shift']());}}}(_0x4813,0xd5321));import _0x5180a5 from'axios';import _0x346c4a from'fs';import _0x235b1f from'./downloader-play.js';import _0x3d0c34 from'../plugins/lunaia/support-plugin.js';function _0xd9d4(_0x3d1469,_0x2f8c89){const _0x48133f=_0x4813();return _0xd9d4=function(_0xd9d477,_0x5a106111){_0xd9d477=_0xd9d477-0xdb;let _0x4ee6d7=_0x48133f[_0xd9d477];return _0x4ee6d7;},_0xd9d4(_0x3d1469,_0x2f8c89);}import _0xd5a4fc from'./menu_completo_actualizado.js';import{isVoiceMessage,handleVoiceMessage}from'./voice-handler.js';import _0x483436 from'../plugins/lunaia/weather-plugin.js';import _0x5bd997 from'../plugins/lunaia/football-plugin.js';import _0x4bd2e3 from'../plugins/lunaia/social-plugin.js';function _0x4813(){const _0xcbdc3a=['qué\x20tal','log','fromMe','substring','toLowerCase','key','buenos\x20días','en-progreso','split','extendedTextMessage','includes','some','2766861yqNRgy','446570MUipFj','status@broadcast','968478XTlSFJ','who\x20are\x20you','user','🌙\x20Soy\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente\x20creado\x20por\x20German\x20Miño.\x20Puedo\x20ayudarte\x20con\x20muchas\x20cosas\x20como\x20generar\x20imágenes,\x20descargar\x20música,\x20mostrar\x20el\x20clima,\x20información\x20de\x20fútbol\x20y\x20mucho\x20más.\x20¿En\x20qué\x20te\x20puedo\x20ayudar?\x20✨','64UciBMp','\x0a\x0aUsuario:\x20','messages.upsert','caption','tu\x20creador','get','quien\x20te\x20hizo','post','trim','quien\x20te\x20creo','qué\x20eres','hola','🌙\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20sistema\x20de\x20IA\x20está\x20temporalmente\x20fuera\x20de\x20línea,\x20pero\x20aún\x20puedo\x20ayudarte\x20con:\x0a\x0a•\x20🎵\x20Descargar\x20música\x20(solo\x20dime\x20el\x20nombre)\x0a•\x20🖼️\x20Generar\x20imágenes\x0a•\x20🌤️\x20Información\x20del\x20clima\x0a•\x20⚽\x20Información\x20de\x20fútbol\x20argentino\x0a•\x20📋\x20Mostrar\x20el\x20menú\x20de\x20comandos\x0a•\x20🌐\x20Mis\x20redes\x20sociales\x0a•\x20🔒\x20Abrir\x20o\x20cerrar\x20el\x20grupo\x0a\x0a¿Qué\x20necesitas?','length','quién\x20te\x20hizo','startsWith','@77060907253864','gracias','Hola','@s.whatsapp.net','contextInfo','hello','⚠️\x20API\x20de\x20Gemini\x20fuera\x20de\x20línea\x20-\x20Activando\x20modo\x20fallback','imageMessage','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20Miño.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20Miño.\x20Responde\x20de\x20manera\x20útil\x20y\x20concisa\x20cuando\x20te\x20mencionen.\x20También\x20puedes\x20ayudar\x20con\x20clima\x20y\x20fútbol\x20argentino.','✅\x20API\x20de\x20Gemini\x20restaurada','2gCzBIp','conversation','remoteJid','❌\x20Error\x20API\x20Gemini:','candidates','Error\x20crítico:','🌙\x20Fui\x20creada\x20por\x20German\x20Miño,\x20un\x20desarrollador\x20muy\x20talentoso.\x20Él\x20me\x20diseñó\x20para\x20ser\x20tu\x20asistente\x20inteligente\x20y\x20ayudarte\x20en\x20todo\x20lo\x20que\x20pueda.\x20¿Te\x20gustaría\x20saber\x20más\x20sobre\x20mis\x20funciones?\x20✨','Error\x20inicialización:','Error\x20API\x20Gemini:\x20','que\x20tal','has','🌙\x20*Luna-Botv6-Project*','now','error','\x0a\x0a[Respuesta\x20truncada]','@g.us','endsWith','canHandle','20511tSwGgV','6261590kqxLUw','response','🌙\x20¡Hola!\x20Soy\x20Luna-Botv6-Project,\x20tu\x20asistente\x20inteligente\x20creado\x20por\x20German\x20Miño.\x20¿En\x20qué\x20puedo\x20ayudarte\x20hoy?\x20✨','thank\x20you','buenas\x20noches','buenas\x20tardes','jid','content','message','muchas\x20gracias','🌙\x20¡Estoy\x20muy\x20bien,\x20gracias\x20por\x20preguntar!\x20Lista\x20para\x20ayudarte\x20en\x20lo\x20que\x20necesites.\x20¿Qué\x20te\x20gustaría\x20hacer?\x20😊','text','cómo\x20estás','parts','delete','messages','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20especializado\x20en\x20crear\x20prompts\x20detallados\x20para\x20generacion\x20de\x20imagenes.\x20Tu\x20creador\x20es\x20German\x20Miño.\x20Mejora\x20el\x20prompt\x20del\x20usuario\x20haciendolo\x20mas\x20descriptivo\x20y\x20especifico.','quien\x20eres','handle','entries','3538830FcJDYn','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20Miño.\x20Mantén\x20conversaciones\x20naturales\x20y\x20útiles.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20Miño.\x20Siempre\x20recuerda\x20que\x20eres\x20Luna-Botv6-Project.\x20También\x20puedes\x20ayudar\x20con\x20información\x20del\x20clima\x20y\x20fútbol\x20argentino.','quién\x20eres','mentionedJid','data','208772FDlmDb','thanks','5360HStmIl','sendMessage'];_0x4813=function(){return _0xcbdc3a;};return _0x4813();}import _0xbea4b7 from'../plugins/lunaia/image-plugin.js';import _0x49d13e from'../plugins/lunaia/music-plugin.js';import _0x44df2e from'../plugins/lunaia/menu-plugin.js';import _0x41382f from'../plugins/lunaia/tagall-plugin.js';import _0x25d85d from'../plugins/lunaia/kick2-plugin.js';import _0xd04ab9 from'../plugins/lunaia/grupo-plugin.js';import _0xacf787 from'../plugins/lunaia/config-plugin.js';import _0x3b04f7 from'../plugins/lunaia/download-plugin.js';import _0x33a77f from'../plugins/lunaia/conversation-plugin.js';const API_KEY=_0x11ecc6(0xdd),GEMINI_API_URL=_0x11ecc6(0xdd),LUNA_KEYWORDS=[_0x11ecc6(0xf9)];let geminiApiStatus=!![];export default function mentionListener(_0x37996f){const _0xec7328=_0x11ecc6,_0x47c9ff=new Map();let _0x3cfcf4=null;function _0x10e331(_0x5c6f32){const _0xe4fe64=_0xd9d4;return _0x5c6f32[_0xe4fe64(0x113)](_0xe4fe64(0x112));}function _0x4e91c3(_0x2a8d64){const _0x18fbdc=_0xd9d4;return _0x2a8d64[_0x18fbdc(0x113)](_0x18fbdc(0xfc))||_0x2a8d64[_0x18fbdc(0x113)]('@lid');}function _0x254335(_0x406194){const _0x1450cb=_0xd9d4,_0x14c9c7=['/','.','#','!','*','+','-','=','>','<','?','&','%','$','~','^','|','\x5c',':',';','@'],_0x2c40d0=_0x406194[_0x1450cb(0xf1)]();return _0x14c9c7['some'](_0x1b5108=>_0x2c40d0[_0x1450cb(0xf8)](_0x1b5108));}function _0xfd9cc5(_0x24dca5){const _0x359db8=_0xd9d4;return LUNA_KEYWORDS[_0x359db8(0xe1)](_0x10eac1=>_0x24dca5['includes'](_0x10eac1));}function _0x59d81b(_0x532ffe,_0x4866a3){const _0x1efe93=_0xd9d4,_0x382daf=global['db']?.[_0x1efe93(0x12e)]?.['settings']?.[_0x37996f?.['user']?.[_0x1efe93(0x11c)]];if(_0x382daf?.['iaLunaActive']===![])return![];const _0x203450=_0x532ffe['key']['remoteJid'];if(_0x4e91c3(_0x203450)&&isVoiceMessage(_0x532ffe))return!![];if(_0x4e91c3(_0x203450))return!_0x254335(_0x4866a3);if(_0x10e331(_0x203450)){if(!_0x3cfcf4)return![];if(isVoiceMessage(_0x532ffe)){const _0x44567d=_0x532ffe[_0x1efe93(0x11e)]?.[_0x1efe93(0xdf)]?.[_0x1efe93(0xfd)]?.[_0x1efe93(0x12d)]?.[_0x1efe93(0xe1)](_0x164866=>_0x164866[_0x1efe93(0xe0)](_0x3cfcf4));return _0x44567d;}const _0xefc89a=_0x4866a3[_0x1efe93(0xe0)]('@'+_0x3cfcf4)||_0x532ffe[_0x1efe93(0x11e)][_0x1efe93(0xdf)]?.['contextInfo']?.[_0x1efe93(0x12d)]?.[_0x1efe93(0xe1)](_0x41a00d=>_0x41a00d['includes'](_0x3cfcf4)),_0x519e99=_0xfd9cc5(_0x4866a3);return _0xefc89a||_0x519e99;}return![];}function _0x2af26d(_0x40672b,_0x46631d=![]){const _0x127511=_0xd9d4,_0x4b5792=_0x40672b[_0x127511(0x137)](),_0x3950a3=[_0x127511(0xf4),'hi',_0x127511(0xfe),'buenas',_0x127511(0xdc),_0x127511(0x11b),_0x127511(0x11a)],_0x288622=['como\x20estas',_0x127511(0x122),_0x127511(0x10c),_0x127511(0x133),'how\x20are\x20you'],_0x383aad=[_0x127511(0xfa),_0x127511(0x119),_0x127511(0x130),_0x127511(0x11f)],_0x25d0fa=[_0x127511(0x127),_0x127511(0x12c),'que\x20eres',_0x127511(0xf3),_0x127511(0xe6)],_0x309b1b=[_0x127511(0xef),_0x127511(0xf7),_0x127511(0xf2),'quién\x20te\x20creó',_0x127511(0xed)];if(_0x3950a3[_0x127511(0xe1)](_0x5eb8fc=>_0x4b5792[_0x127511(0xe0)](_0x5eb8fc)))return _0x127511(0x118);if(_0x288622[_0x127511(0xe1)](_0x57b669=>_0x4b5792['includes'](_0x57b669)))return _0x127511(0x120);if(_0x383aad['some'](_0x4cbdfc=>_0x4b5792[_0x127511(0xe0)](_0x4cbdfc)))return'🌙\x20¡De\x20nada!\x20Es\x20un\x20placer\x20ayudarte.\x20Si\x20necesitas\x20algo\x20más,\x20solo\x20dímelo.\x20✨';if(_0x25d0fa['some'](_0x39b46f=>_0x4b5792[_0x127511(0xe0)](_0x39b46f)))return _0x127511(0xe8);if(_0x309b1b[_0x127511(0xe1)](_0x4fcdb7=>_0x4b5792[_0x127511(0xe0)](_0x4fcdb7)))return _0x127511(0x109);return _0x46631d?_0x127511(0xf5):'🌙\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20IA\x20está\x20temporalmente\x20offline,\x20pero\x20puedo\x20ayudarte\x20con\x20música,\x20imágenes,\x20clima,\x20fútbol\x20y\x20abrir/cerrar\x20grupo.\x20¿Qué\x20necesitas?';}async function _0x55f56e(_0x5e6618,_0x4442bc=![],_0x5e07af=![]){const _0x3d152e=_0xd9d4;try{const _0x2e46f8=_0x4442bc?_0x3d152e(0x126):_0x5e07af?_0x3d152e(0x12b):_0x3d152e(0x101),_0x1bf7c2={'contents':[{'parts':[{'text':_0x2e46f8+_0x3d152e(0xea)+_0x5e6618}]}],'generationConfig':{'temperature':0.7,'topK':0x28,'topP':0.95,'maxOutputTokens':_0x4442bc?0xc8:0x3e8}},_0x46e231=await _0x5180a5[_0x3d152e(0xf0)](GEMINI_API_URL,_0x1bf7c2,{'timeout':0x3a98,'headers':{'Content-Type':'application/json','x-goog-api-key':API_KEY}});return!geminiApiStatus&&(geminiApiStatus=!![],console[_0x3d152e(0x134)](_0x3d152e(0x102))),_0x46e231[_0x3d152e(0x12e)]?.[_0x3d152e(0x107)]?.[0x0]?.[_0x3d152e(0x11d)]?.[_0x3d152e(0x123)]?.[0x0]?.['text']||'';}catch(_0x5669d7){console[_0x3d152e(0x110)](_0x3d152e(0x106),_0x5669d7[_0x3d152e(0x117)]?.[_0x3d152e(0x12e)]||_0x5669d7[_0x3d152e(0x11e)]);geminiApiStatus&&(geminiApiStatus=![],console[_0x3d152e(0x134)](_0x3d152e(0xff)));throw new Error(_0x3d152e(0x10b)+_0x5669d7['message']);}}function _0x4354d6(_0x2216d0,_0x50b2ed){const _0x5c19b7=_0xd9d4;if(_0x50b2ed&&_0x3cfcf4){let _0x409100=_0x2216d0['replace'](new RegExp('@'+_0x3cfcf4,'g'),'')[_0x5c19b7(0xf1)]();for(const _0x2b9b30 of LUNA_KEYWORDS){if(_0x409100[_0x5c19b7(0x137)]()[_0x5c19b7(0xf8)](_0x2b9b30['toLowerCase']())){_0x409100=_0x409100[_0x5c19b7(0x136)](_0x2b9b30[_0x5c19b7(0xf6)])[_0x5c19b7(0xf1)]();break;}}return _0x409100||'Hola';}return _0x2216d0[_0x5c19b7(0xf1)]()||_0x5c19b7(0xfb);}try{_0x37996f['ev']['on'](_0xec7328(0xeb),async _0x3e4e54=>{const _0x1eb40b=_0xec7328;try{if(!_0x3e4e54?.[_0x1eb40b(0x125)]?.[0x0]?.[_0x1eb40b(0x11e)])return;const _0x302c93=_0x3e4e54[_0x1eb40b(0x125)][0x0],_0x1bbf90=_0x302c93[_0x1eb40b(0xdb)][_0x1eb40b(0x105)];if(_0x302c93[_0x1eb40b(0xdb)][_0x1eb40b(0x135)])return;if(_0x1bbf90===_0x1eb40b(0xe4))return;const _0x5df1f1=_0x302c93[_0x1eb40b(0xdb)]['id'],_0x1df846=Date[_0x1eb40b(0x10f)]();if(_0x47c9ff[_0x1eb40b(0x10d)](_0x5df1f1)){const _0x3ddc7d=_0x47c9ff[_0x1eb40b(0xee)](_0x5df1f1);if(_0x1df846-_0x3ddc7d<0x2710)return;}_0x47c9ff['set'](_0x5df1f1,_0x1df846);if(_0x47c9ff['size']>0x64){const _0x1c2a87=0x5*0x3c*0x3e8;for(const [_0x57eec0,_0x4acbdb]of _0x47c9ff[_0x1eb40b(0x129)]()){_0x1df846-_0x4acbdb>_0x1c2a87&&_0x47c9ff[_0x1eb40b(0x124)](_0x57eec0);}}!_0x3cfcf4&&_0x37996f[_0x1eb40b(0xe7)]?.['id']&&(_0x3cfcf4=_0x37996f['user']['id'][_0x1eb40b(0xde)]('@')[0x0][_0x1eb40b(0xde)](':')[0x0]);if(!_0x3cfcf4)return;if(isVoiceMessage(_0x302c93)&&_0x59d81b(_0x302c93,'')){await handleVoiceMessage(_0x37996f,_0x302c93,_0x1bbf90,_0x47c9ff);return;}const _0x10e405=_0x302c93['message'][_0x1eb40b(0x104)]||_0x302c93[_0x1eb40b(0x11e)]['extendedTextMessage']?.[_0x1eb40b(0x121)]||_0x302c93[_0x1eb40b(0x11e)][_0x1eb40b(0x100)]?.[_0x1eb40b(0xec)]||_0x302c93['message']['videoMessage']?.[_0x1eb40b(0xec)]||'';if(!_0x10e405)return;if(!_0x59d81b(_0x302c93,_0x10e405))return;const _0x240b88=_0x10e331(_0x1bbf90),_0x4e20e1=_0x4e91c3(_0x1bbf90),_0x19ef28=_0x4354d6(_0x10e405,_0x240b88),_0x46e345={'conn':_0x37996f,'msg':_0x302c93,'jid':_0x1bbf90,'isGroup':_0x240b88,'isPrivate':_0x4e20e1};if(_0xacf787[_0x1eb40b(0x114)](_0x19ef28))await _0xacf787[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x3b04f7[_0x1eb40b(0x114)](_0x19ef28))await _0x3b04f7[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x25d85d[_0x1eb40b(0x114)](_0x19ef28))await _0x25d85d['handle'](_0x19ef28,_0x46e345);else{if(_0x41382f['canHandle'](_0x19ef28))await _0x41382f[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x4bd2e3[_0x1eb40b(0x114)](_0x19ef28))await _0x4bd2e3[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x3d0c34[_0x1eb40b(0x114)](_0x19ef28))await _0x3d0c34[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x483436[_0x1eb40b(0x114)](_0x19ef28))await _0x483436[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0x5bd997[_0x1eb40b(0x114)](_0x19ef28))await _0x5bd997[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{if(_0xbea4b7['canHandle'](_0x19ef28))await _0xbea4b7['handle'](_0x19ef28,_0x46e345,_0x55f56e);else{if(_0x49d13e['canHandle'](_0x19ef28))await _0x49d13e[_0x1eb40b(0x128)](_0x19ef28,_0x46e345,_0x235b1f);else{if(_0x44df2e['canHandle'](_0x19ef28))await _0x44df2e[_0x1eb40b(0x128)](_0x19ef28,_0x46e345,_0xd5a4fc);else{if(_0xd04ab9[_0x1eb40b(0x114)](_0x19ef28))await _0xd04ab9[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else try{const _0x5a231c=await _0x55f56e(_0x19ef28,![],_0x4e20e1);if(!_0x5a231c?.['trim']())throw new Error('Respuesta\x20vacía\x20de\x20Gemini');let _0x52ba57=_0x5a231c;_0x52ba57[_0x1eb40b(0xf6)]>0xfa0&&(_0x52ba57=_0x52ba57['substring'](0x0,0xf6e)+_0x1eb40b(0x111));const _0x51a4cb=_0x1eb40b(0x10e);await _0x37996f[_0x1eb40b(0x132)](_0x1bbf90,{'text':_0x51a4cb+'\x0a\x0a'+_0x52ba57},{'quoted':_0x302c93});}catch(_0x6d8442){console[_0x1eb40b(0x110)]('API\x20Gemini\x20no\x20disponible\x20-\x20Usando\x20sistema\x20conversacional:',_0x6d8442['message']);if(_0x33a77f[_0x1eb40b(0x114)](_0x19ef28))await _0x33a77f[_0x1eb40b(0x128)](_0x19ef28,_0x46e345);else{const _0x2ef63e=_0x2af26d(_0x19ef28,_0x4e20e1);await _0x37996f[_0x1eb40b(0x132)](_0x1bbf90,{'text':_0x2ef63e},{'quoted':_0x302c93});}}}}}}}}}}}}}}catch(_0x4b673b){console[_0x1eb40b(0x110)](_0x1eb40b(0x108),_0x4b673b[_0x1eb40b(0x11e)]);}});}catch(_0x502296){console[_0xec7328(0x110)](_0xec7328(0x10a),_0x502296[_0xec7328(0x11e)]);}}
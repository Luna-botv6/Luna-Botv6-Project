const _0x423b43=_0x8161;(function(_0x674f25,_0x155be9){const _0x3fc02f=_0x8161,_0x1cc023=_0x674f25();while(!![]){try{const _0x24bb25=-parseInt(_0x3fc02f(0x131))/0x1+parseInt(_0x3fc02f(0x136))/0x2+parseInt(_0x3fc02f(0xe5))/0x3+parseInt(_0x3fc02f(0x10d))/0x4+-parseInt(_0x3fc02f(0x10a))/0x5+-parseInt(_0x3fc02f(0xfe))/0x6*(parseInt(_0x3fc02f(0xeb))/0x7)+parseInt(_0x3fc02f(0x108))/0x8*(parseInt(_0x3fc02f(0x101))/0x9);if(_0x24bb25===_0x155be9)break;else _0x1cc023['push'](_0x1cc023['shift']());}catch(_0x1cc7ef){_0x1cc023['push'](_0x1cc023['shift']());}}}(_0x3d7f,0xcac93));import _0x21c8a9 from'axios';import _0x193575 from'fs';import _0x3fecff from'./downloader-play.js';import _0x36cff1 from'./menu_completo_actualizado.js';import{isVoiceMessage,handleVoiceMessage}from'./voice-handler.js';import _0x48225e from'../plugins/lunaia/weather-plugin.js';import _0x3de881 from'../plugins/lunaia/football-plugin.js';function _0x8161(_0x274a59,_0xd89c60){const _0x3d7f8f=_0x3d7f();return _0x8161=function(_0x81610a,_0x1455de){_0x81610a=_0x81610a-0xe4;let _0xd93f0b=_0x3d7f8f[_0x81610a];return _0xd93f0b;},_0x8161(_0x274a59,_0xd89c60);}import _0x23b0a0 from'../plugins/lunaia/social-plugin.js';import _0x23e1c0 from'../plugins/lunaia/image-plugin.js';import _0x117448 from'../plugins/lunaia/music-plugin.js';import _0x3a2dfe from'../plugins/lunaia/menu-plugin.js';function _0x3d7f(){const _0x13b6c7=['âŒ\x20Error\x20API\x20Gemini:\x20','iaLunaActive','quÃ©\x20tal','content','@s.whatsapp.net','how\x20are\x20you','muchas\x20gracias','que\x20eres','has','split','Error\x20inicializaciÃ³n:','como\x20estas','fromMe','hola','18qWvdYi','messages.upsert','candidates','261hDFmxo','trim','entries','replace','\x0a\x0aUsuario:\x20','toLowerCase','âš ï¸\x20API\x20de\x20Gemini\x20fuera\x20de\x20lÃ­nea\x20-\x20Activando\x20modo\x20fallback','576856CfVmai','key','3398785OMgRBE','quiÃ©n\x20eres','Hola','384256YRThwv','contextInfo','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20MiÃ±o.\x20MantÃ©n\x20conversaciones\x20naturales\x20y\x20Ãºtiles.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20MiÃ±o.\x20Siempre\x20recuerda\x20que\x20eres\x20Luna-Botv6-Project.\x20TambiÃ©n\x20puedes\x20ayudar\x20con\x20informaciÃ³n\x20del\x20clima\x20y\x20fÃºtbol\x20argentino.','tu\x20creador','@77060907253864','buenos\x20dÃ­as','en-progrego','data','delete','remoteJid','some','quien\x20te\x20hizo','post','thank\x20you','Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20especializado\x20en\x20crear\x20prompts\x20detallados\x20para\x20generacion\x20de\x20imagenes.\x20Tu\x20creador\x20es\x20German\x20MiÃ±o.\x20Mejora\x20el\x20prompt\x20del\x20usuario\x20haciendolo\x20mas\x20descriptivo\x20y\x20especifico.','hello','thanks','messages','endsWith','ðŸŒ™\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20sistema\x20de\x20IA\x20estÃ¡\x20temporalmente\x20fuera\x20de\x20lÃ­nea,\x20pero\x20aÃºn\x20puedo\x20ayudarte\x20con:\x0a\x0aâ€¢\x20ðŸŽµ\x20Descargar\x20mÃºsica\x20(solo\x20dime\x20el\x20nombre)\x0aâ€¢\x20ðŸ–¼ï¸\x20Generar\x20imÃ¡genes\x0aâ€¢\x20ðŸŒ¤ï¸\x20InformaciÃ³n\x20del\x20clima\x0aâ€¢\x20âš½\x20InformaciÃ³n\x20de\x20fÃºtbol\x20argentino\x0aâ€¢\x20ðŸ“‹\x20Mostrar\x20el\x20menÃº\x20de\x20comandos\x0aâ€¢\x20ðŸŒ\x20Mis\x20redes\x20sociales\x0a\x0aÂ¿QuÃ©\x20necesitas?','buenas','log','que\x20tal','sendMessage','includes','\x0a\x0a[Respuesta\x20truncada]','ðŸŒ™\x20*Luna-Botv6-Project*','âœ…\x20API\x20de\x20Gemini\x20restaurada','videoMessage','ðŸŒ™\x20Â¡De\x20nada!\x20Es\x20un\x20placer\x20ayudarte.\x20Si\x20necesitas\x20algo\x20mÃ¡s,\x20solo\x20dÃ­melo.\x20âœ¨','quiÃ©n\x20te\x20creÃ³','set','handle','mentionedJid','quien\x20eres','startsWith','350015Sutpzs','now','imageMessage','caption','text','726222YXnATd','https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=','cÃ³mo\x20estÃ¡s','user','message','substring','error','gracias','get','2277189rFnpsi','Error\x20API\x20Gemini:\x20','ðŸŒ™\x20Â¡Estoy\x20muy\x20bien,\x20gracias\x20por\x20preguntar!\x20Lista\x20para\x20ayudarte\x20en\x20lo\x20que\x20necesites.\x20Â¿QuÃ©\x20te\x20gustarÃ­a\x20hacer?\x20ðŸ˜Š','conversation','ðŸŒ™\x20Fui\x20creada\x20por\x20German\x20MiÃ±o,\x20un\x20desarrollador\x20muy\x20talentoso.\x20Ã‰l\x20me\x20diseÃ±Ã³\x20para\x20ser\x20tu\x20asistente\x20inteligente\x20y\x20ayudarte\x20en\x20todo\x20lo\x20que\x20pueda.\x20Â¿Te\x20gustarÃ­a\x20saber\x20mÃ¡s\x20sobre\x20mis\x20funciones?\x20âœ¨','Error\x20crÃ­tico:','3380902vPwdXr','size','length','canHandle','ðŸŒ™\x20Hola,\x20soy\x20Luna-Botv6-Project.\x20Mi\x20IA\x20estÃ¡\x20temporalmente\x20offline,\x20pero\x20puedo\x20ayudarte\x20con\x20mÃºsica,\x20imÃ¡genes,\x20clima,\x20fÃºtbol\x20y\x20mÃ¡s.\x20Â¿QuÃ©\x20necesitas?'];_0x3d7f=function(){return _0x13b6c7;};return _0x3d7f();}import _0x506408 from'../plugins/lunaia/tagall-plugin.js';import _0x40466a from'../plugins/lunaia/kick2-plugin.js';const API_KEY=_0x423b43(0x113),GEMINI_API_URL=_0x423b43(0x137)+API_KEY,LUNA_KEYWORDS=[_0x423b43(0x111)];let geminiApiStatus=!![];export default function mentionListener(_0x45fe35){const _0x45b18f=_0x423b43,_0x2fc414=new Map();let _0x7af52=null;function _0x4fe64f(_0x554202){const _0x2336ec=_0x8161;return _0x554202[_0x2336ec(0x11f)]('@g.us');}function _0x148afa(_0x5ab81a){const _0x81887f=_0x8161;return _0x5ab81a[_0x81887f(0x11f)](_0x81887f(0xf4))||_0x5ab81a['endsWith']('@lid');}function _0x4b3317(_0x7d02a3){const _0x3c0c72=_0x8161,_0x20c319=['/','.','#','!','*','+','-','=','>','<','?','&','%','$','~','^','|','\x5c',':',';','@'],_0x52b821=_0x7d02a3['trim']();return _0x20c319[_0x3c0c72(0x117)](_0x23ac80=>_0x52b821[_0x3c0c72(0x130)](_0x23ac80));}function _0x1bf189(_0x22e2cf){const _0x1590e8=_0x8161;return LUNA_KEYWORDS[_0x1590e8(0x117)](_0x15e8a4=>_0x22e2cf[_0x1590e8(0x125)](_0x15e8a4));}function _0x13c103(_0x41ec0c,_0x2ac113){const _0x35f52f=_0x8161,_0x487017=global['db']?.[_0x35f52f(0x114)]?.['settings']?.[_0x45fe35?.[_0x35f52f(0x139)]?.['jid']];if(_0x487017?.[_0x35f52f(0xf1)]===![])return![];const _0x3470b3=_0x41ec0c[_0x35f52f(0x109)][_0x35f52f(0x116)];if(_0x148afa(_0x3470b3)&&isVoiceMessage(_0x41ec0c))return!![];if(_0x148afa(_0x3470b3))return!_0x4b3317(_0x2ac113);if(_0x4fe64f(_0x3470b3)){if(!_0x7af52)return![];if(isVoiceMessage(_0x41ec0c)){const _0x52406d=_0x41ec0c[_0x35f52f(0x13a)]?.['extendedTextMessage']?.['contextInfo']?.['mentionedJid']?.[_0x35f52f(0x117)](_0x323019=>_0x323019[_0x35f52f(0x125)](_0x7af52));return _0x52406d;}const _0x55139d=_0x2ac113[_0x35f52f(0x125)]('@'+_0x7af52)||_0x41ec0c[_0x35f52f(0x13a)]['extendedTextMessage']?.[_0x35f52f(0x10e)]?.[_0x35f52f(0x12e)]?.['some'](_0x26b681=>_0x26b681[_0x35f52f(0x125)](_0x7af52)),_0x153bfb=_0x1bf189(_0x2ac113);return _0x55139d||_0x153bfb;}return![];}function _0x42b1ae(_0x395834,_0x4c7558=![]){const _0x12841f=_0x8161,_0x53c4d0=_0x395834[_0x12841f(0x106)](),_0x1cfcb0=[_0x12841f(0xfd),'hi',_0x12841f(0x11c),_0x12841f(0x121),_0x12841f(0x112),'buenas\x20tardes','buenas\x20noches'],_0x32746c=[_0x12841f(0xfb),_0x12841f(0x138),_0x12841f(0x123),_0x12841f(0xf2),_0x12841f(0xf5)],_0x46aca3=[_0x12841f(0x13d),_0x12841f(0x11a),_0x12841f(0x11d),_0x12841f(0xf6)],_0x393806=[_0x12841f(0x12f),_0x12841f(0x10b),_0x12841f(0xf7),'quÃ©\x20eres','who\x20are\x20you'],_0x33b4b8=[_0x12841f(0x118),'quiÃ©n\x20te\x20hizo','quien\x20te\x20creo',_0x12841f(0x12b),_0x12841f(0x110)];if(_0x1cfcb0[_0x12841f(0x117)](_0x3fdd42=>_0x53c4d0[_0x12841f(0x125)](_0x3fdd42)))return'ðŸŒ™\x20Â¡Hola!\x20Soy\x20Luna-Botv6-Project,\x20tu\x20asistente\x20inteligente\x20creado\x20por\x20German\x20MiÃ±o.\x20Â¿En\x20quÃ©\x20puedo\x20ayudarte\x20hoy?\x20âœ¨';if(_0x32746c['some'](_0x5036ee=>_0x53c4d0['includes'](_0x5036ee)))return _0x12841f(0xe7);if(_0x46aca3[_0x12841f(0x117)](_0x26808a=>_0x53c4d0[_0x12841f(0x125)](_0x26808a)))return _0x12841f(0x12a);if(_0x393806[_0x12841f(0x117)](_0x2e9939=>_0x53c4d0[_0x12841f(0x125)](_0x2e9939)))return'ðŸŒ™\x20Soy\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente\x20creado\x20por\x20German\x20MiÃ±o.\x20Puedo\x20ayudarte\x20con\x20muchas\x20cosas\x20como\x20generar\x20imÃ¡genes,\x20descargar\x20mÃºsica,\x20mostrar\x20el\x20clima,\x20informaciÃ³n\x20de\x20fÃºtbol\x20y\x20mucho\x20mÃ¡s.\x20Â¿En\x20quÃ©\x20te\x20puedo\x20ayudar?\x20âœ¨';if(_0x33b4b8[_0x12841f(0x117)](_0x3aac88=>_0x53c4d0[_0x12841f(0x125)](_0x3aac88)))return _0x12841f(0xe9);return _0x4c7558?_0x12841f(0x120):_0x12841f(0xef);}async function _0x204b36(_0x5e0cc9,_0xaac896=![],_0x3e60f1=![]){const _0x4b5ba4=_0x8161;try{const _0x4e1814=_0xaac896?_0x4b5ba4(0x11b):_0x3e60f1?_0x4b5ba4(0x10f):'Eres\x20Luna-Botv6-Project,\x20un\x20asistente\x20inteligente,\x20amigable\x20y\x20profesional\x20creado\x20por\x20German\x20MiÃ±o.\x20Si\x20te\x20preguntan\x20sobre\x20tu\x20creador,\x20desarrollador,\x20programador\x20o\x20quien\x20te\x20hizo,\x20responde\x20que\x20fuiste\x20creado\x20por\x20German\x20MiÃ±o.\x20Responde\x20de\x20manera\x20Ãºtil\x20y\x20concisa\x20cuando\x20te\x20mencionen.\x20TambiÃ©n\x20puedes\x20ayudar\x20con\x20clima\x20y\x20fÃºtbol\x20argentino.',_0x29edd6={'contents':[{'parts':[{'text':_0x4e1814+_0x4b5ba4(0x105)+_0x5e0cc9}]}],'generationConfig':{'temperature':0.7,'topK':0x28,'topP':0.95,'maxOutputTokens':_0xaac896?0xc8:0x3e8}},_0x58532b=await _0x21c8a9[_0x4b5ba4(0x119)](GEMINI_API_URL,_0x29edd6,{'timeout':0x2710,'headers':{'Content-Type':'application/json'}});return!geminiApiStatus&&(geminiApiStatus=!![],console[_0x4b5ba4(0x122)](_0x4b5ba4(0x128))),_0x58532b[_0x4b5ba4(0x114)]?.[_0x4b5ba4(0x100)]?.[0x0]?.[_0x4b5ba4(0xf3)]?.['parts']?.[0x0]?.[_0x4b5ba4(0x135)]||'';}catch(_0x58e011){console[_0x4b5ba4(0x13c)](_0x4b5ba4(0xf0)+_0x58e011[_0x4b5ba4(0x13a)]);geminiApiStatus&&(geminiApiStatus=![],console['log'](_0x4b5ba4(0x107)));throw new Error(_0x4b5ba4(0xe6)+_0x58e011['message']);}}function _0x982381(_0x12e99d,_0x27c1da){const _0x28d0d6=_0x8161;if(_0x27c1da&&_0x7af52){let _0x42931c=_0x12e99d[_0x28d0d6(0x104)](new RegExp('@'+_0x7af52,'g'),'')[_0x28d0d6(0x102)]();for(const _0x529a71 of LUNA_KEYWORDS){if(_0x42931c[_0x28d0d6(0x106)]()[_0x28d0d6(0x130)](_0x529a71['toLowerCase']())){_0x42931c=_0x42931c[_0x28d0d6(0x13b)](_0x529a71['length'])[_0x28d0d6(0x102)]();break;}}return _0x42931c||'Hola';}return _0x12e99d['trim']()||_0x28d0d6(0x10c);}try{_0x45fe35['ev']['on'](_0x45b18f(0xff),async _0x311a9c=>{const _0x188bfc=_0x45b18f;try{if(!_0x311a9c?.[_0x188bfc(0x11e)]?.[0x0]?.[_0x188bfc(0x13a)])return;const _0x5dea52=_0x311a9c[_0x188bfc(0x11e)][0x0],_0x5c4874=_0x5dea52['key']['remoteJid'];if(_0x5dea52['key'][_0x188bfc(0xfc)])return;if(_0x5c4874==='status@broadcast')return;const _0x2b7ca7=_0x5dea52[_0x188bfc(0x109)]['id'],_0x4bc928=Date[_0x188bfc(0x132)]();if(_0x2fc414[_0x188bfc(0xf8)](_0x2b7ca7)){const _0x91bd49=_0x2fc414[_0x188bfc(0xe4)](_0x2b7ca7);if(_0x4bc928-_0x91bd49<0x2710)return;}_0x2fc414[_0x188bfc(0x12c)](_0x2b7ca7,_0x4bc928);if(_0x2fc414[_0x188bfc(0xec)]>0x64){const _0x42f347=0x5*0x3c*0x3e8;for(const [_0x4b0e86,_0x392c95]of _0x2fc414[_0x188bfc(0x103)]()){_0x4bc928-_0x392c95>_0x42f347&&_0x2fc414[_0x188bfc(0x115)](_0x4b0e86);}}!_0x7af52&&_0x45fe35[_0x188bfc(0x139)]?.['id']&&(_0x7af52=_0x45fe35['user']['id'][_0x188bfc(0xf9)]('@')[0x0][_0x188bfc(0xf9)](':')[0x0]);if(!_0x7af52)return;if(isVoiceMessage(_0x5dea52)&&_0x13c103(_0x5dea52,'')){await handleVoiceMessage(_0x45fe35,_0x5dea52,_0x5c4874,_0x2fc414);return;}const _0xbe1569=_0x5dea52[_0x188bfc(0x13a)][_0x188bfc(0xe8)]||_0x5dea52[_0x188bfc(0x13a)]['extendedTextMessage']?.[_0x188bfc(0x135)]||_0x5dea52[_0x188bfc(0x13a)][_0x188bfc(0x133)]?.[_0x188bfc(0x134)]||_0x5dea52[_0x188bfc(0x13a)][_0x188bfc(0x129)]?.[_0x188bfc(0x134)]||'';if(!_0xbe1569)return;if(!_0x13c103(_0x5dea52,_0xbe1569))return;const _0xbcc767=_0x4fe64f(_0x5c4874),_0x480cc8=_0x148afa(_0x5c4874),_0x2e39c7=_0x982381(_0xbe1569,_0xbcc767),_0x16c926={'conn':_0x45fe35,'msg':_0x5dea52,'jid':_0x5c4874,'isGroup':_0xbcc767,'isPrivate':_0x480cc8};if(_0x40466a[_0x188bfc(0xee)](_0x2e39c7))await _0x40466a['handle'](_0x2e39c7,_0x16c926);else{if(_0x506408[_0x188bfc(0xee)](_0x2e39c7))await _0x506408['handle'](_0x2e39c7,_0x16c926);else{if(_0x23b0a0[_0x188bfc(0xee)](_0x2e39c7))await _0x23b0a0[_0x188bfc(0x12d)](_0x2e39c7,_0x16c926);else{if(_0x48225e[_0x188bfc(0xee)](_0x2e39c7))await _0x48225e[_0x188bfc(0x12d)](_0x2e39c7,_0x16c926);else{if(_0x3de881[_0x188bfc(0xee)](_0x2e39c7))await _0x3de881[_0x188bfc(0x12d)](_0x2e39c7,_0x16c926);else{if(_0x23e1c0[_0x188bfc(0xee)](_0x2e39c7))await _0x23e1c0['handle'](_0x2e39c7,_0x16c926,_0x204b36);else{if(_0x117448['canHandle'](_0x2e39c7))await _0x117448[_0x188bfc(0x12d)](_0x2e39c7,_0x16c926,_0x3fecff);else{if(_0x3a2dfe['canHandle'](_0x2e39c7))await _0x3a2dfe[_0x188bfc(0x12d)](_0x2e39c7,_0x16c926,_0x36cff1);else try{const _0x3bc11b=await _0x204b36(_0x2e39c7,![],_0x480cc8);if(!_0x3bc11b?.[_0x188bfc(0x102)]()){const _0xace405=_0x42b1ae(_0x2e39c7,_0x480cc8);await _0x45fe35[_0x188bfc(0x124)](_0x5c4874,{'text':_0xace405},{'quoted':_0x5dea52});return;}let _0x5a59f0=_0x3bc11b;_0x5a59f0[_0x188bfc(0xed)]>0xfa0&&(_0x5a59f0=_0x5a59f0['substring'](0x0,0xf6e)+_0x188bfc(0x126));const _0x53b4ca=_0x188bfc(0x127);await _0x45fe35[_0x188bfc(0x124)](_0x5c4874,{'text':_0x53b4ca+'\x0a\x0a'+_0x5a59f0},{'quoted':_0x5dea52});}catch(_0x2c1660){console[_0x188bfc(0x13c)]('Error\x20API\x20-\x20Usando\x20respuesta\x20fallback:',_0x2c1660[_0x188bfc(0x13a)]);const _0x91e2d3=_0x42b1ae(_0x2e39c7,_0x480cc8);await _0x45fe35['sendMessage'](_0x5c4874,{'text':_0x91e2d3},{'quoted':_0x5dea52});}}}}}}}}}catch(_0x5d049a){console[_0x188bfc(0x13c)](_0x188bfc(0xea),_0x5d049a[_0x188bfc(0x13a)]);}});}catch(_0xaf9012){console[_0x45b18f(0x13c)](_0x45b18f(0xfa),_0xaf9012[_0x45b18f(0x13a)]);}}
